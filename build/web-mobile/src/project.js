window.__require=function n(t,e,o){function c(r,s){if(!e[r]){if(!t[r]){var a=r.split("/");if(a=a[a.length-1],!t[a]){var h="function"==typeof __require&&__require;if(!s&&h)return h(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+r+"'")}}var l=e[r]={exports:{}};t[r][0].call(l.exports,function(n){return c(t[r][1][n]||n)},l,l.exports,n,t,e,o)}return e[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)c(o[r]);return c}({main:[function(n,t,e){"use strict";cc._RF.push(t,"6ba82L+HANHPKup9e5dg7rE","main"),cc.Class({extends:cc.Component,properties:{chat_container:cc.Node,edit_box:cc.EditBox,me_chat_item:cc.Node,other_chat_item:cc.Node},start:function(){this.connectServer()},connectServer:function(){var n=this;this.conn=new WebSocket("ws://47.104.189.170:8123"),this.conn.onopen=function(n){console.log("client connected!"),console.log(n)},this.conn.onmessage=function(t){console.log("client get message!"),console.log(t),n.addChatItem(JSON.parse(t.data))},this.conn.onclose=function(n,t){console.log("client closed!"),console.log(n,t)},this.conn.onerror=function(n,t){console.log("client error!"),console.log(n,t)}},sendText:function(){var n=this.edit_box.string;this.edit_box.string="",this.conn&&this.conn.send(n)},addChatItem:function(n){this.createChatItem(n).parent=this.chat_container},createChatItem:function(n){var t=void 0;t=1==n.side?cc.instantiate(this.me_chat_item):cc.instantiate(this.other_chat_item);var e=cc.find("bg/Label",t).getComponent(cc.Label),o=cc.find("bg",t),c=cc.find("head_icon/name",t);return e.string=n.data,c.getComponent(cc.Label).string=n.id,setTimeout(function(){t.height=o.height>120?o.height+20:120},100),t},closeConnection:function(){this.conn&&(this.conn.close(),this.conn=null)}}),cc._RF.pop()},{}]},{},["main"]);